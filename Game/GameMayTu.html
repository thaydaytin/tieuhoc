<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√¢y T·ª´ - Luy·ªán G√µ Ph√≠m</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN (ƒë·ªÉ bi√™n d·ªãch JSX trong tr√¨nh duy·ªát) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* CSS animations for the game elements */
        @keyframes floatLeft {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(-120vw); opacity: 0.5; } /* Tr√¥i ra ngo√†i m√†n h√¨nh */
        }

        @keyframes plusOneAnimation {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }

        .word-cloud-container {
            position: absolute;
            right: -20vw; /* B·∫Øt ƒë·∫ßu t·ª´ ngo√†i m√†n h√¨nh b√™n ph·∫£i */
            white-space: nowrap;
            animation-name: floatLeft;
            animation-timing-function: linear;
            animation-fill-mode: forwards; /* Gi·ªØ tr·∫°ng th√°i cu·ªëi c√πng c·ªßa animation */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease-out, transform 0.3s ease-out; /* Hi·ªáu ·ª©ng m·ªù d·∫ßn khi bi·∫øn m·∫•t */
            z-index: 10; /* ƒê·∫£m b·∫£o t·ª´ n·∫±m tr√™n c√°c y·∫øu t·ªë n·ªÅn */
        }

        .word-cloud-container.typed {
            opacity: 0;
            transform: scale(0.5);
        }

        .cloud-svg {
            width: 150px; /* K√≠ch th∆∞·ªõc ƒë√°m m√¢y */
            height: 80px; /* TƒÉng chi·ªÅu cao ƒë·ªÉ ch·ªØ v·ª´a h∆°n */
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1)); /* ƒê·ªï b√≥ng cho ƒë√°m m√¢y */
        }

        .cloud-text {
            position: absolute;
            font-weight: bold;
            color: #333;
            font-size: 1.25rem; /* Gi·ªØ k√≠ch th∆∞·ªõc ch·ªØ */
            z-index: 1; /* ƒê·∫£m b·∫£o ch·ªØ n·∫±m tr√™n ƒë√°m m√¢y */
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5); /* T·∫°o hi·ªáu ·ª©ng ch·ªØ n·ªïi */
            /* CƒÉn gi·ªØa ch·ªØ trong ƒë√°m m√¢y */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .plus-one {
            position: absolute;
            font-size: 1.5rem;
            font-weight: bold;
            color: #FFD700; /* M√†u v√†ng kim */
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            animation: plusOneAnimation 1s ease-out forwards;
            z-index: 15; /* ƒê·∫£m b·∫£o +1 n·∫±m tr√™n ƒë√°m m√¢y */
            /* V·ªã tr√≠ ban ƒë·∫ßu c·ªßa +1 s·∫Ω l√† trung t√¢m c·ªßa ƒë√°m m√¢y */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* CƒÉn gi·ªØa +1 */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
          .cloud-text {
            font-size: 1rem;
          }
          .cloud-svg {
            width: 120px; /* K√≠ch th∆∞·ªõc ƒë√°m m√¢y nh·ªè h∆°n tr√™n mobile */
            height: 60px;
          }
          .plus-one {
            font-size: 1.2rem;
          }
        }

        /* Animation cho chim bay */
        @keyframes fly {
          0% { transform: translateX(0) translateY(0); }
          25% { transform: translateX(50px) translateY(-20px); }
          50% { transform: translateX(100px) translateY(0); }
          75% { transform: translateX(50px) translateY(20px); }
          100% { transform: translateX(0) translateY(0); }
        }
        .bird-animation {
          animation: fly 4s infinite ease-in-out;
        }

        /* Animation cho ong bay */
        @keyframes buzz {
          0% { transform: translateX(0) translateY(0); }
          25% { transform: translateX(10px) translateY(-5px); }
          50% { transform: translateX(0) translateY(0); }
          75% { transform: translateX(-10px) translateY(5px); }
          100% { transform: translateX(0) translateY(0); }
        }
        .bee-animation {
          animation: buzz 1s infinite ease-in-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;
        const ReactDOM = window.ReactDOM;

        // Danh s√°ch c√°c t·ª´ ti·∫øng Vi·ªát ng·∫Øn, kh√¥ng d·∫•u
        const WORD_LIST = [
          'toi', 'ban', 'hoc', 'tap', 'viet', 'nam', 'game', 'phim', 'go', 'nhanh',
          'may', 'tinh', 'chuot', 'sach', 'but', 'qua', 'tao', 'cam', 'xanh', 'do',
          'vang', 'den', 'trang', 'mua', 'he', 'dong', 'xuan', 'thu', 'gio', 'nuoc',
          'lua', 'dat', 'troi', 'song', 'bien', 'nui', 'rung', 'cay', 'hoa', 'la',
          'trai', 'ngot', 'chua', 'dang', 'cay', 'man', 'ngon', 'dep', 'xau', 'lon',
          'be', 'cao', 'thap', 'dai', 'ngan', 'rong', 'hep', 'am', 'lanh', 'nong',
          'mat', 'sang', 'toi', 'nhieu', 'it', 'mot', 'hai', 'ba', 'bon', 'sau',
          'bay', 'tam', 'chin', 'muoi', 'con', 'cho', 'meo', 'chim', 'ca', 'lon',
          'nho', 'nhay', 'chay', 'di', 'den', 'ngu', 'day', 'an', 'uong', 'noi',
          'cuoi', 'khoc', 'hat', 'doc', 'viet', 'nghe', 'nhin', 'lam', 'choi', 'hoc',
          'tap', 'ngay', 'dem', 'sang', 'chieu', 'toi', 'trua', 'som', 'muon', 'tuan',
          'thang', 'nam', 'tet', 'le', 'vui', 'buon', 'gian', 'hon', 'yeu', 'ghet'
        ];

        // H√†m t·∫°o ID duy nh·∫•t
        const generateId = () => Math.random().toString(36).substr(2, 9);

        // S·ªë l∆∞·ª£ng t·ª´ t·ªëi ƒëa hi·ªÉn th·ªã c√πng l√∫c tr√™n m√†n h√¨nh
        const MAX_WORDS_ON_SCREEN = 7; // Gi·ªõi h·∫°n s·ªë l∆∞·ª£ng m√¢y t·ª´

        const App = () => {
          const [score, setScore] = useState(0); // ƒêi·ªÉm c·ªßa ng∆∞·ªùi ch∆°i
          const [timeLeft, setTimeLeft] = useState(30); // Th·ªùi gian c√≤n l·∫°i, ƒëi·ªÅu ch·ªânh th√†nh 30 gi√¢y
          const [gameStarted, setGameStarted] = useState(false); // Tr·∫°ng th√°i game ƒë√£ b·∫Øt ƒë·∫ßu
          const [gameOver, setGameOver] = useState(false); // Tr·∫°ng th√°i game k·∫øt th√∫c
          const [words, setWords] = useState([]); // Danh s√°ch c√°c t·ª´ ƒëang hi·ªÉn th·ªã tr√™n m√†n h√¨nh
          const [inputValue, setInputValue] = useState(''); // Gi√° tr·ªã √¥ nh·∫≠p li·ªáu
          const inputRef = useRef(null); // Tham chi·∫øu ƒë·∫øn √¥ nh·∫≠p li·ªáu ƒë·ªÉ focus
          const gameAreaRef = useRef(null); // Tham chi·∫øu ƒë·∫øn khu v·ª±c hi·ªÉn th·ªã game
          const gameIntervalRef = useRef(null); // Tham chi·∫øu cho interval game timer
          const wordGenerationIntervalRef = useRef(null); // Tham chi·∫øu cho interval t·∫°o t·ª´

          // H√†m b·∫Øt ƒë·∫ßu tr√≤ ch∆°i
          const startGame = useCallback(() => {
            setScore(0);
            setTimeLeft(30); // ƒê·∫∑t l·∫°i th·ªùi gian v·ªÅ 30 gi√¢y khi b·∫Øt ƒë·∫ßu game m·ªõi
            setWords([]);
            setInputValue('');
            setGameOver(false);
            setGameStarted(true);
            // T·ª± ƒë·ªông focus v√†o √¥ nh·∫≠p li·ªáu khi b·∫Øt ƒë·∫ßu game
            if (inputRef.current) {
              inputRef.current.focus();
            }
          }, []);

          // H√†m t·∫°o t·ª´ m·ªõi
          const generateWord = useCallback(() => {
            // Ch·ªâ t·∫°o t·ª´ m·ªõi n·∫øu s·ªë l∆∞·ª£ng t·ª´ tr√™n m√†n h√¨nh ch∆∞a ƒë·∫°t gi·ªõi h·∫°n
            if (words.length >= MAX_WORDS_ON_SCREEN) {
              return;
            }

            const randomWord = WORD_LIST[Math.floor(Math.random() * WORD_LIST.length)];
            const id = generateId();
            
            // L·∫•y chi·ªÅu cao khu v·ª±c game t·ª´ gameAreaRef, n·∫øu ch∆∞a c√≥ th√¨ d√πng ∆∞·ªõc t√≠nh
            // ƒê·∫£m b·∫£o gameAreaRef.current t·ªìn t·∫°i tr∆∞·ªõc khi truy c·∫≠p clientHeight
            const gameAreaHeight = gameAreaRef.current ? gameAreaRef.current.clientHeight : window.innerHeight * 0.5;
            const top = Math.random() * (gameAreaHeight - 100) + 50; // ƒê·∫£m b·∫£o t·ª´ kh√¥ng qu√° s√°t m√©p
            
            // T·ªëc ƒë·ªô tr√¥i tƒÉng d·∫ßn: c√†ng nhi·ªÅu ƒëi·ªÉm, t·ª´ tr√¥i c√†ng nhanh (th·ªùi gian duration c√†ng gi·∫£m)
            // Gi·ªõi h·∫°n t·ªëc ƒë·ªô t·ªëi ƒëa ƒë·ªÉ kh√¥ng qu√° kh√≥
            const baseDuration = 20; // Th·ªùi gian tr√¥i ban ƒë·∫ßu (gi√¢y)
            const speedIncreaseFactor = 0.2; // Gi·∫£m 0.2 gi√¢y cho m·ªói ƒëi·ªÉm
            const minDuration = 5; // Th·ªùi gian tr√¥i t·ªëi thi·ªÉu (gi√¢y)

            const duration = Math.max(minDuration, baseDuration - (score * speedIncreaseFactor));

            setWords(prevWords => [
              ...prevWords,
              { id, text: randomWord, top, duration, typed: false, originalTop: top } // L∆∞u v·ªã tr√≠ ban ƒë·∫ßu cho hi·ªáu ·ª©ng +1
            ]);
          }, [score, words.length]); // score v√† words.length l√† dependency ƒë·ªÉ t√≠nh to√°n t·ªëc ƒë·ªô v√† gi·ªõi h·∫°n t·ª´

          // H√†m x·ª≠ l√Ω khi nh·∫≠p li·ªáu
          const handleInputChange = useCallback((e) => {
            const value = e.target.value;
            setInputValue(value);

            // T√¨m t·ª´ kh·ªõp v·ªõi gi√° tr·ªã nh·∫≠p li·ªáu
            const matchedWordIndex = words.findIndex(word =>
              !word.typed && word.text === value.trim()
            );

            if (matchedWordIndex !== -1) {
              // N·∫øu t√¨m th·∫•y t·ª´ kh·ªõp
              setScore(prevScore => prevScore + 1); // TƒÉng ƒëi·ªÉm
              setWords(prevWords => {
                const newWords = [...prevWords];
                newWords[matchedWordIndex].typed = true; // ƒê√°nh d·∫•u t·ª´ ƒë√£ ƒë∆∞·ª£c g√µ
                return newWords;
              });
              setInputValue(''); // X√≥a √¥ nh·∫≠p li·ªáu
            }
          }, [words]);

          // X·ª≠ l√Ω s·ª± ki·ªán nh·∫•n ph√≠m
          const handleKeyDown = useCallback((e) => {
            if (e.key === 'Enter') {
              setInputValue(''); // X√≥a √¥ nh·∫≠p li·ªáu khi nh·∫•n Enter
            }
          }, []);

          // H√†m ƒë·ªÉ l·∫•y danh hi·ªáu d·ª±a tr√™n ƒëi·ªÉm s·ªë
          const getRankTitle = useCallback((currentScore) => {
            if (currentScore === 0) {
              return "C·ªë g·∫Øng l·∫ßn sau nh√©!";
            } else if (currentScore >= 1 && currentScore <= 5) {
              return "Ng√≥n Tay T·∫≠p S·ª±";
            } else if (currentScore >= 6 && currentScore <= 10) {
              return "Ph√≠m Th·ªß Kh·ªüi ƒê·∫ßu";
            } else if (currentScore >= 11 && currentScore <= 15) {
              return "B√†n Ph√≠m Nhanh Nh·∫πn";
            } else if (currentScore >= 16 && currentScore <= 20) {
              return "Chuy√™n Gia T·ªëc ƒê·ªô";
            } else if (currentScore >= 21 && currentScore <= 25) {
              return "B·∫≠c Th·∫ßy G√µ Ph√≠m";
            } else if (currentScore >= 26 && currentScore <= 30) {
              return "Vua T·ªëc ƒê·ªô B√†n Ph√≠m";
            } else if (currentScore > 30) {
              return "Huy·ªÅn Tho·∫°i G√µ Ph√≠m";
            }
            return ""; // Tr∆∞·ªùng h·ª£p m·∫∑c ƒë·ªãnh
          }, []);

          // useEffect ƒë·ªÉ qu·∫£n l√Ω timer v√† t·∫°o t·ª´
          useEffect(() => {
            // Ch·ªâ kh·ªüi t·∫°o interval khi gameStarted l√† true, game ch∆∞a k·∫øt th√∫c V√Ä gameAreaRef.current ƒë√£ c√≥ gi√° tr·ªã
            if (gameStarted && !gameOver && gameAreaRef.current) {
              // X√≥a b·∫•t k·ª≥ interval hi·ªán c√≥ n√†o tr∆∞·ªõc khi thi·∫øt l·∫≠p c√°i m·ªõi
              clearInterval(gameIntervalRef.current);
              clearInterval(wordGenerationIntervalRef.current);

              // B·∫Øt ƒë·∫ßu ƒë·∫øm ng∆∞·ª£c th·ªùi gian
              gameIntervalRef.current = setInterval(() => {
                setTimeLeft(prevTime => {
                  if (prevTime <= 1) {
                    clearInterval(gameIntervalRef.current);
                    clearInterval(wordGenerationIntervalRef.current);
                    setGameOver(true);
                    setGameStarted(false); // D·ª´ng game
                    return 0;
                  }
                  return prevTime - 1;
                });
              }, 1000);

              // B·∫Øt ƒë·∫ßu t·∫°o t·ª´ m·ªõi sau m·ªói kho·∫£ng th·ªùi gian ng·∫´u nhi√™n (nhanh h∆°n)
              wordGenerationIntervalRef.current = setInterval(() => {
                generateWord();
              }, Math.random() * (1000 - 500) + 500); // T·∫°o t·ª´ m·ªõi m·ªói 0.5-1 gi√¢y

              // Cleanup function khi component unmount ho·∫∑c game k·∫øt th√∫c
              return () => {
                clearInterval(gameIntervalRef.current);
                clearInterval(wordGenerationIntervalRef.current);
              };
            } else {
              // N·∫øu tr·∫°ng th√°i game thay ƒë·ªïi sang ch∆∞a b·∫Øt ƒë·∫ßu ho·∫∑c k·∫øt th√∫c, h√£y x√≥a c√°c interval
              clearInterval(gameIntervalRef.current);
              clearInterval(wordGenerationIntervalRef.current);
            }
          }, [gameStarted, gameOver, generateWord, gameAreaRef.current]); // Th√™m gameAreaRef.current v√†o dependencies

          // H√†m x·ª≠ l√Ω khi animation c·ªßa t·ª´ k·∫øt th√∫c (t·ª©c l√† t·ª´ ƒë√£ tr√¥i qua m√†n h√¨nh ho·∫∑c ƒë√£ g√µ)
          const handleAnimationEnd = useCallback((id) => {
            setWords(prevWords =>
              prevWords.filter(word => word.id !== id) // Lo·∫°i b·ªè t·ª´ kh·ªèi state
            );
          }, []);

          // useEffect ƒë·ªÉ x·ª≠ l√Ω vi·ªác x√≥a nhanh t·ª´ ƒë√£ g√µ
          useEffect(() => {
            const typedWords = words.filter(word => word.typed);
            typedWords.forEach(word => {
              // ƒê·∫∑t timeout ƒë·ªÉ lo·∫°i b·ªè t·ª´ sau khi hi·ªáu ·ª©ng bi·∫øn m·∫•t ho√†n t·∫•t (0.3s)
              setTimeout(() => {
                setWords(prevWords => prevWords.filter(w => w.id !== word.id));
              }, 300); // Th·ªùi gian n√†y kh·ªõp v·ªõi transition duration c·ªßa .word-cloud-container.typed
            });
          }, [words]); // Ch·∫°y khi danh s√°ch words thay ƒë·ªïi

          // useEffect ƒë·ªÉ ƒë·∫£m b·∫£o input lu√¥n focus khi game ƒëang ch·∫°y
          useEffect(() => {
            if (gameStarted && !gameOver && inputRef.current) {
              inputRef.current.focus();
            }
          }, [gameStarted, gameOver]);


          // Component ƒë∆°n gi·∫£n cho c√¢y
          const Tree = ({ style }) => (
            <div className="absolute" style={style}>
              {/* Th√¢n c√¢y */}
              <div className="w-4 h-12 bg-amber-800 mx-auto rounded-b-lg"></div>
              {/* T√°n l√° */}
              <div className="w-16 h-16 bg-green-600 rounded-full absolute -top-8 left-1/2 transform -translate-x-1/2"></div>
              <div className="w-12 h-12 bg-green-700 rounded-full absolute -top-10 left-1/2 transform -translate-x-1/2 -ml-4"></div>
              <div className="w-10 h-10 bg-green-500 rounded-full absolute -top-6 left-1/2 transform -translate-x-1/2 ml-4"></div>
            </div>
          );

          // Component ƒë∆°n gi·∫£n cho b·ª•i c·ªè
          const Bush = ({ style }) => (
            <div className="absolute" style={style}>
              <div className="w-20 h-10 bg-green-500 rounded-full"></div>
              <div className="w-16 h-8 bg-green-600 rounded-full absolute -top-2 left-8"></div>
            </div>
          );

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-200 to-blue-400 flex flex-col items-center justify-center p-4 font-inter relative overflow-hidden">
              <div className="flex flex-col items-center justify-center h-screen w-screen p-4"> {/* Full m√†n h√¨nh */}
                <div className="bg-white p-8 rounded-xl shadow-2xl w-full h-full text-center relative overflow-hidden flex flex-col"> {/* K√≠ch th∆∞·ªõc l·ªõn h∆°n */}
                  <h1 className="text-4xl font-extrabold text-blue-700 mb-6">
                    M√¢y T·ª´ - Luy·ªán G√µ Ph√≠m
                  </h1>

                  <div className="flex justify-between items-center mb-6 text-xl font-semibold text-gray-700">
                    <span>ƒêi·ªÉm: <span className="text-green-600">{score}</span></span>
                    <span>Th·ªùi gian: <span className="text-red-500">{timeLeft}s</span></span>
                  </div>

                  {/* Khu v·ª±c hi·ªÉn th·ªã t·ª´ v√† c·∫£nh quan */}
                  <div ref={gameAreaRef} className="relative w-full flex-grow bg-blue-100 border-2 border-blue-300 rounded-lg mb-6 overflow-hidden">
                    {/* M·∫∑t tr·ªùi */}
                    <svg className="absolute top-4 right-4 w-20 h-20 z-10" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="40" fill="#FFD700" /> {/* V√≤ng tr√≤n m·∫∑t tr·ªùi */}
                        {/* Tia n·∫Øng */}
                        {[0, 30, 60, 90, 120, 150, 180, 210, 240, 270, 300, 330].map(angle => (
                            <line
                                key={angle}
                                x1="50" y1="50" x2="50" y2="10"
                                stroke="#FFD700" strokeWidth="5"
                                transform={`rotate(${angle} 50 50)`}
                            />
                        ))}
                    </svg>

                    {/* C√¢y l·ªõn ph√≠a sau */}
                    <svg className="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-64 h-auto z-0" viewBox="0 0 200 300">
                        {/* Th√¢n c√¢y */}
                        <rect x="90" y="150" width="20" height="150" fill="#8B4513" rx="5" ry="5" />
                        {/* T√°n l√° */}
                        <circle cx="100" cy="100" r="80" fill="#228B22" />
                        <circle cx="70" cy="150" r="60" fill="#2E8B57" />
                        <circle cx="130" cy="150" r="70" fill="#3CB371" />
                        <circle cx="150" cy="100" r="50" fill="#20B2AA" />
                    </svg>

                    {/* C√°c y·∫øu t·ªë n·ªÅn ƒë·ªông v·∫≠t v√† c√¢y c·ªè n·∫±m TRONG khu v·ª±c game */}
                    <div className="absolute bottom-0 left-0 w-full h-1/3 bg-gradient-to-t from-green-500 to-green-300 rounded-t-full z-0">
                      {/* C√¢y */}
                      <Tree style={{ bottom: '20%', left: '10%' }} />
                      <Tree style={{ bottom: '30%', left: '80%', transform: 'scale(0.8)' }} />
                      {/* B·ª•i c·ªè */}
                      <Bush style={{ bottom: '10%', left: '30%' }} />
                      <Bush style={{ bottom: '5%', left: '60%', transform: 'scale(0.7)' }} />
                      {/* Th·ªè */}
                      <span className="absolute bottom-5 left-20 text-4xl">üê∞</span>
                      {/* Chim */}
                      <span className="absolute top-1/4 left-1/4 text-3xl bird-animation">üê¶</span>
                      <span className="absolute top-1/3 right-1/4 text-2xl bird-animation" style={{ animationDuration: '3s', animationDelay: '1s' }}>üê¶</span>
                      {/* Ong */}
                      <span className="absolute top-1/2 left-1/2 text-xl bee-animation">üêù</span>
                    </div>

                    {!gameStarted && !gameOver && (
                      <div className="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white text-2xl font-bold z-20">
                        Nh·∫•n "B·∫Øt ƒë·∫ßu ch∆°i" ƒë·ªÉ b·∫Øt ƒë·∫ßu!
                      </div>
                    )}
                    {words.map(word => (
                      <div
                        key={word.id}
                        className={`word-cloud-container ${word.typed ? 'typed' : ''}`}
                        style={{
                          top: `${word.top}px`,
                          animationDuration: `${word.duration}s`,
                          animationPlayState: gameStarted && !gameOver ? 'running' : 'paused', // D·ª´ng animation khi game ch∆∞a b·∫Øt ƒë·∫ßu ho·∫∑c k·∫øt th√∫c
                        }}
                        onAnimationEnd={(e) => {
                            // Ch·ªâ x·ª≠ l√Ω animationEnd n·∫øu ƒë√≥ l√† animation floatLeft
                            if (e.animationName === 'floatLeft') {
                                handleAnimationEnd(word.id);
                            }
                        }}
                      >
                        {/* SVG cho h√¨nh ƒë√°m m√¢y gi·ªëng th·∫≠t h∆°n */}
                        <svg className="cloud-svg" viewBox="0 0 100 50">
                          <path fill="#ffffff" d="M 10 30 Q 0 30, 0 20 Q 0 10, 10 10 Q 20 0, 30 0 Q 40 0, 50 10 Q 60 0, 70 0 Q 80 0, 90 10 Q 100 10, 100 20 Q 100 30, 90 30 Q 80 40, 70 40 Q 60 40, 50 30 Q 40 40, 30 40 Q 20 40, 10 30 Z" />
                        </svg>
                        {/* Ch·ªØ c·ªßa t·ª´ */}
                        <span className="cloud-text">{word.text}</span>
                        {/* Hi·ªáu ·ª©ng +1 khi g√µ ƒë√∫ng */}
                        {word.typed && <span className="plus-one">+1</span>}
                      </div>
                    ))}
                  </div>

                  {/* √î nh·∫≠p li·ªáu */}
                  <input
                    ref={inputRef}
                    type="text"
                    className="w-full p-3 border-2 border-blue-400 rounded-lg text-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6"
                    placeholder={gameStarted ? "G√µ t·ª´ ·ªü ƒë√¢y..." : "Nh·∫•n B·∫Øt ƒë·∫ßu ch∆°i"}
                    value={inputValue}
                    onChange={handleInputChange}
                    onKeyDown={handleKeyDown} // Th√™m s·ª± ki·ªán onKeyDown
                    disabled={!gameStarted || gameOver} // V√¥ hi·ªáu h√≥a khi game ch∆∞a b·∫Øt ƒë·∫ßu ho·∫∑c ƒë√£ k·∫øt th√∫c
                  />

                  {/* N√∫t B·∫Øt ƒë·∫ßu/Ch∆°i l·∫°i */}
                  {!gameStarted && !gameOver && (
                    <button
                      onClick={startGame}
                      className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75"
                    >
                      B·∫Øt ƒë·∫ßu ch∆°i
                    </button>
                  )}

                  {gameOver && (
                    <div className="absolute inset-0 bg-black bg-opacity-75 flex flex-col items-center justify-center rounded-xl z-20">
                      <h2 className="text-white text-5xl font-extrabold mb-4 animate-bounce">
                        H·∫øt Gi·ªù!
                      </h2>
                      <p className="text-white text-3xl mb-2">
                        B·∫°n ƒë·∫°t ƒë∆∞·ª£c <span className="text-yellow-400">{score}</span> ƒëi·ªÉm!
                      </p>
                      {score === 0 ? (
                        <p className="text-white text-2xl mb-6">C·ªë g·∫Øng l·∫ßn sau nh√©!</p>
                      ) : (
                        <p className="text-white text-2xl mb-6">
                          Danh hi·ªáu: <span className="text-yellow-300">{getRankTitle(score)}</span>
                        </p>
                      )}
                      <button
                        onClick={startGame}
                        className="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75"
                      >
                        Ch∆°i L·∫°i
                      </button>
                    </div>
                  )}
                </div>

                <p className="mt-8 text-gray-600 text-sm">
                  M·∫πo: G√µ ch√≠nh x√°c t·ª´ ƒë·ªÉ ho√†n th√†nh. Nh·∫•n Enter ƒë·ªÉ x√≥a nhanh √¥ g√µ.
                </p>
              </div>
            </div>
          );
        };

        // Render the React App component into the 'root' div
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
